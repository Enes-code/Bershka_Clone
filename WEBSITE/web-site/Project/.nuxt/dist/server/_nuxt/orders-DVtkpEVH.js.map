{"version":3,"file":"orders-DVtkpEVH.js","sources":["../../../../stores/orders.ts"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport { addDoc, collection } from 'firebase/firestore'\r\nimport type { Order } from '~/types/order'\r\nimport type { CartItem } from '~/types/cart'\r\n\r\nexport const useOrdersStore = defineStore('orders', {\r\n  state: () => ({\r\n    lastOrderId: null as string | null,\r\n  }),\r\n  actions: {\r\n    async createOrder(payload: { userId: string; items: CartItem[]; total: number; currency: Order['currency'] }) {\r\n      const { $db } = useNuxtApp()\r\n      const ref = await addDoc(collection($db, 'orders'), {\r\n        userId: payload.userId,\r\n        items: payload.items,\r\n        total: payload.total,\r\n        currency: payload.currency,\r\n        createdAt: Date.now(),\r\n        status: 'created',\r\n      })\r\n      this.lastOrderId = ref.id\r\n      return ref.id\r\n    },\r\n  },\r\n})\r\n\r\n"],"names":[],"mappings":";;AAKO,MAAM,iBAAiB,YAAY,UAAU;AAAA,EAClD,OAAO,OAAO;AAAA,IACZ,aAAa;AAAA,EAAA;AAAA,EAEf,SAAS;AAAA,IACP,MAAM,YAAY,SAA4F;AAC5G,YAAM,EAAE,IAAA,IAAQ,WAAA;AAChB,YAAM,MAAM,MAAM,OAAO,WAAW,KAAK,QAAQ,GAAG;AAAA,QAClD,QAAQ,QAAQ;AAAA,QAChB,OAAO,QAAQ;AAAA,QACf,OAAO,QAAQ;AAAA,QACf,UAAU,QAAQ;AAAA,QAClB,WAAW,KAAK,IAAA;AAAA,QAChB,QAAQ;AAAA,MAAA,CACT;AACD,WAAK,cAAc,IAAI;AACvB,aAAO,IAAI;AAAA,IACb;AAAA,EAAA;AAEJ,CAAC;"}