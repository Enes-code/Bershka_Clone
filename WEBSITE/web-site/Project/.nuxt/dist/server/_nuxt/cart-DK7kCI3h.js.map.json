{"file":"cart-DK7kCI3h.js","mappings":";AAIO,MAAM,eAAe,YAAY,QAAQ;AAAA,EAC9C,OAAO,OAAO;AAAA,IACZ,OAAO,CAAA;AAAA,EAAC;AAAA,EAEV,SAAS;AAAA,IACP,MAAM,OAAO;AACX,aAAO,MAAM,MAAM,OAAO,CAAC,KAAK,MAAM,MAAM,EAAE,QAAQ,EAAE,KAAK,CAAC;AAAA,IAChE;AAAA,IACA,MAAM,OAAO;AACX,aAAO,MAAM,MAAM,OAAO,CAAC,KAAK,MAAM,MAAM,EAAE,KAAK,CAAC;AAAA,IACtD;AAAA,EAAA;AAAA,EAEF,SAAS;AAAA,IACP,WAAW,GAAY;AACrB,YAAM,KAAK,KAAK,MAAM,KAAK,CAAC,MAAM,EAAE,cAAc,EAAE,EAAE;AACtD,UAAI,OAAO,OAAO;AAAA,WACb;AACH,aAAK,MAAM,KAAK;AAAA,UACd,WAAW,EAAE;AAAA,UACb,OAAO,EAAE;AAAA,UACT,OAAO,EAAE;AAAA,UACT,UAAU,EAAE;AAAA,UACZ,UAAU,EAAE;AAAA,UACZ,KAAK;AAAA,QAAA,CACN;AAAA,MACH;AAAA,IACF;AAAA,IACA,IAAI,WAAmB;AACrB,YAAM,KAAK,KAAK,MAAM,KAAK,CAAC,MAAM,EAAE,cAAc,SAAS;AAC3D,UAAI,OAAO,OAAO;AAAA,IACpB;AAAA,IACA,IAAI,WAAmB;AACrB,YAAM,KAAK,KAAK,MAAM,KAAK,CAAC,MAAM,EAAE,cAAc,SAAS;AAC3D,UAAI,CAAC,GAAI;AACT,SAAG,OAAO;AACV,UAAI,GAAG,OAAO,EAAG,MAAK,QAAQ,KAAK,MAAM,OAAO,CAAC,MAAM,EAAE,cAAc,SAAS;AAAA,IAClF;AAAA,IACA,QAAQ;AACN,WAAK,QAAQ,CAAA;AAAA,IACf;AAAA,EAAA;AAEJ,CAAC;","names":[],"sources":["../../../../stores/cart.ts"],"sourcesContent":["import { defineStore } from 'pinia'\r\nimport type { CartItem } from '~/types/cart'\r\nimport type { Product } from '~/types/product'\r\n\r\nexport const useCartStore = defineStore('cart', {\r\n  state: () => ({\r\n    items: [] as CartItem[],\r\n  }),\r\n  getters: {\r\n    total(state) {\r\n      return state.items.reduce((sum, i) => sum + i.price * i.qty, 0)\r\n    },\r\n    count(state) {\r\n      return state.items.reduce((sum, i) => sum + i.qty, 0)\r\n    },\r\n  },\r\n  actions: {\r\n    addProduct(p: Product) {\r\n      const it = this.items.find((x) => x.productId === p.id)\r\n      if (it) it.qty += 1\r\n      else {\r\n        this.items.push({\r\n          productId: p.id,\r\n          title: p.title,\r\n          price: p.price,\r\n          currency: p.currency,\r\n          imageUrl: p.imageUrl,\r\n          qty: 1,\r\n        })\r\n      }\r\n    },\r\n    inc(productId: string) {\r\n      const it = this.items.find((x) => x.productId === productId)\r\n      if (it) it.qty += 1\r\n    },\r\n    dec(productId: string) {\r\n      const it = this.items.find((x) => x.productId === productId)\r\n      if (!it) return\r\n      it.qty -= 1\r\n      if (it.qty <= 0) this.items = this.items.filter((x) => x.productId !== productId)\r\n    },\r\n    clear() {\r\n      this.items = []\r\n    },\r\n  },\r\n})\r\n\r\n"],"version":3}